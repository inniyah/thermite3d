#include "VertexFormats.cg"

float4 main(v2f IN,  uniform float4 ambientLightColor, uniform sampler2D colorMap : TEXUNIT0, uniform float4x4 textureMatrix) : COLOR
{	
	IN.TexCoords = mul(textureMatrix, IN.TexCoords);
	float4 sample = tex2D(colorMap, IN.TexCoords.xz);
	sample *= IN.DiffuseLightColor + ambientLightColor;
	sample *= IN.Material.y;
	return sample;
}